# 故障排除指南

## 概述

本指南涵盖 CC-Admin 开发和生产环境中的常见问题及解决方案。

## 🚀 环境问题

### Node.js 版本问题

**问题**：Node.js 版本不兼容

**解决**：

```bash
# 检查版本
node --version

# 使用 nvm 安装正确版本
nvm install 18
nvm use 18
```

### pnpm 问题

**问题**：pnpm 命令不存在或版本过低

**解决**：

```bash
# 安装最新版本
npm install -g pnpm@latest

# 验证版本
pnpm --version
```

### 依赖安装问题

**问题**：依赖安装失败

**解决**：

```bash
# 清理缓存
rm -rf node_modules
rm pnpm-lock.yaml
pnpm store prune

# 重新安装
pnpm install
```

## 🔧 构建问题

### 构建失败

**问题**：内存不足或超时

**解决**：

```bash
# 增加内存限制
export NODE_OPTIONS="--max-old-space-size=4096"

# 清理缓存后重新构建
pnpm build
```

### TypeScript 错误

**问题**：类型检查失败

**解决**：

```bash
# 运行类型检查
pnpm type-check

# 修复类型错误
pnpm lint:fix
```

## 🎨 样式问题

### UnoCSS 不生效

**问题**：样式类名不生效

**解决**：

1. 检查 `uno.config.ts` 配置
2. 确认 Vite 插件已正确加载
3. 重启开发服务器

### 主题切换问题

**问题**：主题切换不生效

**解决**：

1. 检查 Pinia store 配置
2. 确认 CSS 变量定义
3. 验证主题切换逻辑

## 🔐 认证问题

### 登录失败

**问题**：无法登录或 Token 无效

**解决**：

1. 检查 Mock 服务是否启用
2. 验证用户名密码（admin/123456）
3. 检查 Token 存储逻辑

### 权限问题

**问题**：页面访问权限不足

**解决**：

1. 检查用户角色配置
2. 验证路由权限设置
3. 确认权限验证逻辑

## 📱 响应式问题

### 移动端适配

**问题**：移动端显示异常

**解决**：

1. 检查 rem 适配配置
2. 验证媒体查询设置
3. 测试不同屏幕尺寸

## 🔧 开发工具问题

### 热更新失效

**问题**：代码修改后页面不更新

**解决**：

1. 重启开发服务器
2. 检查文件监听配置
3. 清除浏览器缓存

### 调试工具问题

**问题**：Vue DevTools 不显示

**解决**：

1. 确认开发环境配置
2. 检查浏览器扩展
3. 重启浏览器

## 📊 性能问题

### 页面加载慢

**问题**：首屏加载时间过长

**解决**：

1. 检查代码分割配置
2. 优化图片和资源
3. 启用 gzip 压缩

### 内存泄漏

**问题**：长时间使用后内存占用过高

**解决**：

1. 检查事件监听器清理
2. 验证组件销毁逻辑
3. 使用内存分析工具

## 🔍 调试技巧

### 常用命令

```bash
# 检查环境
pnpm check-env

# 运行测试
pnpm test

# 分析构建
pnpm build:analyze

# 检查依赖
pnpm audit
```

### 日志调试

```typescript
// 开发环境日志
if (import.meta.env.DEV) {
  console.log('调试信息')
}

// 错误捕获
try {
  // 可能出错的代码
} catch (error) {
  console.error('错误信息:', error)
}
```

## 📞 获取帮助

### 常见资源

- 项目文档：查看相关功能指南
- GitHub Issues：搜索或提交问题
- 社区讨论：参与项目讨论

### 问题报告

提交问题时请包含：

- 错误信息和截图
- 复现步骤
- 环境信息
- 相关代码片段

通过本指南，您可以快速定位和解决大部分常见问题。
