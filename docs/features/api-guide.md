<!--
  @copyright Copyright (c) 2025 chichuang
  @license MIT
  @description cc-admin 企业级后台管理框架 - api-guide
  本文件为 chichuang 原创，禁止擅自删除署名或用于商业用途。
-->

# API 管理指南

## 概述

cc-admin 基于 Alova 构建了现代化的 API 管理系统，采用模块化设计，支持请求/响应拦截、错误处理、类型安全、缓存管理等企业级功能。

## 🏗️ 架构设计

### 目录结构

```
src/api/
├── index.ts              # 🚪 API 统一导出入口
└── modules/              # 📦 API 模块
    ├── auth.ts           # 认证相关 API
    ├── user.ts           # 用户管理 API
    └── ...               # 其他业务模块

src/utils/http/           # 🔧 HTTP 工具
├── index.ts              # HTTP 工具导出
├── instance.ts           # Alova 实例配置
├── interceptors.ts       # 请求/响应拦截器
├── methods.ts            # HTTP 方法封装
└── types.ts              # 类型定义
```

## 🔧 HTTP 配置

### Alova 实例配置

- 支持多个 Alova 实例配置
- 基础 URL 和超时时间配置
- 请求头和响应类型配置
- 缓存策略和共享请求配置
- 公共实例和私有实例分离

### 拦截器配置

- 请求拦截器：Token 注入、请求头设置
- 响应拦截器：统一错误处理、数据转换
- 错误处理：网络错误、业务错误、认证错误
- 重试机制：自动重试、手动重试配置

## 📦 API 模块开发

### 模块结构

- 按业务功能划分模块
- 统一的模块导出格式
- 类型安全的 API 定义
- 请求参数和响应类型定义

### 开发规范

- 模块命名规范：小写字母 + 连字符
- 函数命名规范：动词 + 名词
- 类型定义规范：接口命名和属性定义
- 注释规范：函数说明和参数说明

## 🔐 认证和权限

### Token 管理

- JWT Token 自动注入
- Token 刷新机制
- Token 过期处理
- 安全存储策略

### 权限控制

- 接口权限验证
- 角色权限控制
- 动态权限分配
- 权限缓存优化

## 📊 数据管理

### 缓存策略

- GET 请求自动缓存
- 缓存时间配置
- 缓存失效机制
- 手动缓存控制

### 数据转换

- 请求数据预处理
- 响应数据后处理
- 数据格式转换
- 错误数据过滤

## 🛡️ 错误处理

### 错误分类

- 网络错误：连接失败、超时
- 业务错误：参数错误、权限不足
- 系统错误：服务器错误、未知错误

### 错误处理策略

- 统一错误提示
- 错误日志记录
- 错误重试机制
- 用户友好提示

## 🚀 性能优化

### 请求优化

- 请求合并和去重
- 请求取消机制
- 请求优先级管理
- 并发请求控制

### 缓存优化

- 智能缓存策略
- 缓存预热机制
- 缓存更新策略
- 内存使用优化

## 📈 监控和分析

### 性能监控

- 请求响应时间监控
- 错误率统计
- 缓存命中率统计
- 网络状态监控

### 调试工具

- 请求日志记录
- 响应数据查看
- 错误堆栈追踪
- 性能分析工具
