<!--
  @copyright Copyright (c) 2025 chichuang
  @license MIT
  @description cc-admin 企业级后台管理框架 - architecture-guide
  本文件为 chichuang 原创，禁止擅自删除署名或用于商业用途。
-->

# 架构设计指南

## 概述

cc-admin 采用模块化、工程化的架构设计，基于 Vue 3.5+ 生态系统构建现代化企业级后台管理框架。

## 🏗️ 整体架构

### 分层架构

```
┌─────────────────────────────────────────────────────────────┐
│                        表示层 (Presentation Layer)            │
├─────────────────────────────────────────────────────────────┤
│ Views          │ Components      │ Layouts                   │
│ 页面组件        │ 公共组件        │ 布局模板                  │
├─────────────────────────────────────────────────────────────┤
│                        逻辑层 (Logic Layer)                   │
├─────────────────────────────────────────────────────────────┤
│ Stores         │ Hooks          │ Router                    │
│ 状态管理        │ 组合式函数      │ 路由管理                  │
├─────────────────────────────────────────────────────────────┤
│                        服务层 (Service Layer)                 │
├─────────────────────────────────────────────────────────────┤
│ API            │ Utils          │ Common                    │
│ 接口服务        │ 工具函数        │ 公共模块                  │
├─────────────────────────────────────────────────────────────┤
│                        基础层 (Infrastructure Layer)          │
├─────────────────────────────────────────────────────────────┤
│ Config         │ Types          │ Assets                    │
│ 配置文件        │ 类型定义        │ 静态资源                  │
└─────────────────────────────────────────────────────────────┘
```

## 🎯 设计原则

### 1. 统一性原则

所有功能模块采用 **`index.ts + modules/`** 统一结构：

```
src/
├── api/
│   ├── index.ts         # 统一导出入口
│   └── modules/         # 具体API模块
├── stores/
│   ├── index.ts         # 统一导出入口
│   └── modules/         # 具体Store模块
├── hooks/
│   ├── index.ts         # 统一导出入口
│   └── modules/         # 具体Hook模块
└── router/
    ├── index.ts         # 统一导出入口
    └── modules/         # 具体路由模块
```

### 2. 模块化原则

每个功能模块独立封装，低耦合高内聚：

- 模块独立性设计
- 清晰的模块边界
- 统一的模块接口
- 模块间解耦

### 3. 自动化原则

通过 `autoImportModulesSync` 实现模块自动导入：

- 自动模块发现
- 统一模块导入
- 类型安全保证
- 开发体验优化

## 📁 目录结构规范

### 核心目录

| 目录         | 职责         | 命名规范  |
| ------------ | ------------ | --------- |
| `src/api`    | API 接口管理 | camelCase |
| `src/stores` | 状态管理     | camelCase |
| `src/router` | 路由配置     | camelCase |
| `src/hooks`  | 组合式函数   | camelCase |
| `src/utils`  | 工具函数     | camelCase |
| `src/common` | 公共模块     | camelCase |

### 命名规范

- **文件命名**：使用 camelCase
- **目录命名**：使用 camelCase
- **组件命名**：使用 PascalCase
- **变量命名**：使用 camelCase
- **常量命名**：使用 UPPER_SNAKE_CASE

## 🔧 技术栈架构

### 核心技术

| 技术           | 版本  | 作用        |
| -------------- | ----- | ----------- |
| **Vue**        | 3.5+  | 前端框架    |
| **TypeScript** | 5+    | 类型系统    |
| **Vite**       | 7+    | 构建工具    |
| **UnoCSS**     | 0.66+ | 原子化CSS   |
| **Pinia**      | 2+    | 状态管理    |
| **Vue Router** | 4+    | 路由管理    |
| **Alova**      | 2+    | HTTP 客户端 |

### 开发工具

| 工具           | 作用         |
| -------------- | ------------ |
| **ESLint**     | 代码质量检查 |
| **Prettier**   | 代码格式化   |
| **Husky**      | Git Hooks    |
| **Commitlint** | 提交信息规范 |

## 🚀 模块化设计

### API 模块化

- 按业务功能划分模块
- 统一的接口规范
- 类型安全的 API 定义
- 自动模块导入机制

### 状态管理模块化

- 按功能域划分 Store
- 状态隔离和共享
- 持久化策略配置
- 状态同步机制

### 路由模块化

- 按页面功能分组
- 动态路由生成
- 权限控制集成
- 路由懒加载优化

### 组件模块化

- 组件分类管理
- 组件复用策略
- 组件通信机制
- 组件性能优化

## 🔄 自动化机制

### 模块自动导入

- 文件系统扫描
- 模块自动发现
- 统一导出管理
- 类型推导支持

### 构建自动化

- 依赖自动安装
- 代码自动检查
- 构建自动优化
- 部署自动流程

### 开发自动化

- 代码自动格式化
- 提交自动检查
- 测试自动运行
- 文档自动生成

## 📊 性能优化

### 构建优化

- 代码分割策略
- 资源压缩优化
- 缓存策略配置
- 依赖预构建

### 运行时优化

- 组件懒加载
- 状态管理优化
- 路由缓存策略
- 内存泄漏防护

### 网络优化

- 资源预加载
- 请求合并优化
- 缓存策略优化
- CDN 加速配置

## 🛡️ 安全架构

### 前端安全

- XSS 防护机制
- CSRF 防护策略
- 输入验证机制
- 输出转义处理

### 权限控制

- 路由权限控制
- 组件权限控制
- 数据权限控制
- 功能权限控制

### 数据安全

- 敏感数据加密
- 传输安全保证
- 存储安全策略
- 访问控制机制

## 🔗 扩展性设计

### 插件系统

- 插件注册机制
- 插件生命周期
- 插件配置管理
- 插件依赖处理

### 主题系统

- 主题切换机制
- 主题配置管理
- 主题扩展接口
- 主题预览功能

### 国际化系统

- 多语言支持
- 语言包管理
- 动态语言切换
- 格式化处理

## 📈 监控和分析

### 性能监控

- 页面加载性能
- 组件渲染性能
- 内存使用监控
- 错误率统计

### 用户行为分析

- 页面访问统计
- 功能使用分析
- 用户路径追踪
- 转化率分析

### 错误监控

- 错误自动捕获
- 错误分类统计
- 错误上报机制
- 错误修复追踪
